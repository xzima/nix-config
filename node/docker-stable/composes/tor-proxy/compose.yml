# based on: https://github.com/dockur/tor
# https://github.com/dperson/torproxy/blob/master/Dockerfile
# Guides: https://wiki.archlinux.org/title/Tor_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B9_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_Tor_%D0%B2_%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80%D0%B5
services:
  tor-proxy:
    image: dockurr/tor:0.4.8
    restart: unless-stopped
    user: ${PUID}:${PGID}
    ports:
      - "29050:9050"
    volumes:
      - ./torrc:/etc/tor/torrc
      - ${STORAGE_PATH}/tor-proxy/bridges:/etc/tor/bridges
      - ${STORAGE_PATH}/tor-proxy/data:/var/lib/tor
    labels:
      # homepage
      homepage.group: Infrastructure
      homepage.name: TorProxy
      homepage.icon: tor.png
      homepage.description: Tor Proxy

networks:
  default:
    external: true
    name: proxy
