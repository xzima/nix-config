services:
  awg-proxy:
    # TODO: create own build
    image: ghcr.io/artem-russkikh/wireproxy-awg:11e48a406e3045c8c4f458fca638093a4de0470e
    restart: unless-stopped
    volumes:
      - ./config:/etc/wireproxy/config
    expose:
      - "25550"
      - "25555"
    secrets:
      - awg.conf
    labels:
      homepage.group: Infrastructure
      homepage.name: AwgProxy
      homepage.icon: https://avatars.githubusercontent.com/u/74861536
      homepage.description: AmneziaWG Proxy
secrets:
  awg.conf:
    file: ${SECRET_PATH}/awg-proxy.awg.conf

networks:
  default:
    external: true
    name: proxy
